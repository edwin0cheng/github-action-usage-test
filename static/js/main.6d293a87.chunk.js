(this["webpackJsonpra-stats-viewer"]=this["webpackJsonpra-stats-viewer"]||[]).push([[0],{205:function(e,a,t){e.exports=t(393)},393:function(e,a,t){"use strict";t.r(a);var n=t(1),l=t.n(n),r=t(22),c=t.n(r),s=t(431),i=t(430),m=t(25),o=t.n(m),u=t(51),p=t(41),h=t(424),f=t(395),b=t(432),g=t(171),E=t(29),d=t(396),y=Object(d.a)((function(e){return{container:{background:"#eee"}}}));function v(e){var a=y(),t=Object(g.a)(e.commits);return t.reverse(),l.a.createElement(l.a.Fragment,null,l.a.createElement(E.d,{className:a.container},l.a.createElement(E.c,{data:t,margin:{top:16,right:16,bottom:0,left:24}},l.a.createElement(E.e,{dataKey:"commit_sha"}),l.a.createElement(E.f,{unit:"%"},l.a.createElement(E.a,{angle:270,position:"left",style:{textAnchor:"middle"}},"Error Rate")),l.a.createElement(E.b,{type:"monotone",dataKey:"errorRate",stroke:"#556CD6",dot:!1}))))}var k=t(166),_=t(429),x=t(426),N=t(428),w=t(422),j=t(427),O=t(423),M=t(434),S=t(435),T=t(425),D=t(433),P=Object(k.a)({root:{width:"100%",overflowX:"auto"},paper:{paddingBottom:"100px"},table:{minWidth:650}});function R(e){var a=Object(k.a)({tablecell:{},detail:{paddingLeft:"1em",paddingRight:"1em"}})(),t=function(e,a){return 0===a?"0%":"".concat((e/a*100).toFixed(2),"%")},n=function(n){var r=function(e){return t(e,n.expressions)},c=[];return"0"===e.tab?(c.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"c0"},n.declarations)),c.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"c1"},n.functions)),c.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"c2"},n.expressions)),c.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"c3"},n.unknown_types," (",r(n.unknown_types),")")),c.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"c4"},n.partial_unknown_types," (",r(n.partial_unknown_types),")")),c.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"c5"},n.type_mismatches))):(c.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"c6"},Math.floor(n.database_loaded_time.milliseconds))),c.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"c7"},Math.floor(n.item_collection_time.milliseconds))),c.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"c8"},Math.floor(n.inferenece_time.milliseconds))),c.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"c9"},Math.floor(n.total_time.milliseconds)))),l.a.createElement(O.a,{key:n.project_name},l.a.createElement(w.a,{className:a.tablecell,component:"th",scope:"row"},function(e){var a=e.substring(0,e.length-1);return a=a.substring(a.lastIndexOf("/")+1,e.length)}(n.project_name)),l.a.createElement(w.a,{className:a.tablecell,align:"right"},n.roots),l.a.createElement(w.a,{className:a.tablecell,align:"right"},n.crates," [",n.modules,"]"),c)},r=e.commit.totalExpressions,c=e.commit.totalPartial+e.commit.totalUnknown,s=[];return"0"===e.tab?(s.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"0"},"Decl")),s.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"1"},"Func")),s.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"2"},"Expr")),s.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"3"},"Unknown")),s.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"4"},"Partial")),s.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"5"},"Mismatches"))):(s.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"6"},"Database Loaded(ms)")),s.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"7"},"Items(ms)")),s.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"8"},"Inference(ms)")),s.push(l.a.createElement(w.a,{className:a.tablecell,align:"right",key:"9"},"Total(ms)"))),l.a.createElement(h.a,{key:e.commit.commit_sha},l.a.createElement(b.a,{display:"flex",p:1},l.a.createElement(b.a,{flexGrow:1},l.a.createElement("p",null,l.a.createElement("a",{href:"https://github.com/rust-analyzer/rust-analyzer/commit/"+e.commit.commit_sha},"@"+e.commit.commit_sha)),l.a.createElement(b.a,{display:"flex"},l.a.createElement(b.a,{className:a.detail},l.a.createElement("small",null,"Timestamp: ",e.commit.timestamp)),l.a.createElement(b.a,{className:a.detail},l.a.createElement("small",null,"Total Expression: ",r)),l.a.createElement(b.a,{className:a.detail},l.a.createElement("small",null,"Total Unknown + Partial: ",c," (",t(c,r),")")))),l.a.createElement(b.a,null,l.a.createElement(M.a,{component:"fieldset"},l.a.createElement(S.a,{"aria-label":"position",name:"position",value:e.tab,onChange:function(a){e.setTab(a.target.value)},row:!0},l.a.createElement(T.a,{value:"0",control:l.a.createElement(D.a,{color:"primary"}),label:"Syntax",labelPlacement:"end"}),l.a.createElement(T.a,{value:"1",control:l.a.createElement(D.a,{color:"primary"}),label:"Time(ms)",labelPlacement:"end"}))))),l.a.createElement(x.a,{size:"small","aria-label":"Benchmarks table"},l.a.createElement(j.a,null,l.a.createElement(O.a,null,l.a.createElement(w.a,{className:a.tablecell},"Project Name"),l.a.createElement(w.a,{className:a.tablecell,align:"right"},"Roots"),l.a.createElement(w.a,{className:a.tablecell,align:"right"},"Crates [Modules]"),s)),l.a.createElement(N.a,null,function(){var a=[],t=!0,l=!1,r=void 0;try{for(var c,s=e.commit.stats[Symbol.iterator]();!(t=(c=s.next()).done);t=!0){var i=c.value;a.push(n(i))}}catch(m){l=!0,r=m}finally{try{t||null==s.return||s.return()}finally{if(l)throw r}}return a}())))}function F(e){var a=P(),t=l.a.useState("0"),n=Object(p.a)(t,2),r=n[0],c=n[1],s=function(e){c(e)};return l.a.createElement("div",{className:a.root},e.commits.map((function(e){return l.a.createElement(_.a,{className:a.paper,key:e.commit_sha},l.a.createElement(R,{commit:e,setTab:s,tab:r}))})))}var z=t(56);function A(e){var a=0,t=!0,n=!1,l=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){a+=r.value.expressions}}catch(s){n=!0,l=s}finally{try{t||null==c.return||c.return()}finally{if(n)throw l}}return a}function B(e){var a=0,t=!0,n=!1,l=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){a+=r.value.unknown_types}}catch(s){n=!0,l=s}finally{try{t||null==c.return||c.return()}finally{if(n)throw l}}return a}function U(e){var a=0,t=!0,n=!1,l=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){a+=r.value.partial_unknown_types}}catch(s){n=!0,l=s}finally{try{t||null==c.return||c.return()}finally{if(n)throw l}}return a}function W(e){var a=A(e),t=B(e)+U(e);return 0===t?0:t/a*100}var C=function(){var e=Object(u.a)(o.a.mark((function e(){var a,t,n,l,r,c,s,i,m,h,f,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/commits.json");case 2:return a=e.sent,e.next=5,a.json();case 5:t=e.sent,n=[],l=function(e){return e.endsWith("ms")?parseFloat(e.substring(0,e.length-2)):1e3*parseFloat(e.substring(0,e.length-1))},r=function(){var e=Object(u.a)(o.a.mark((function e(a){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/"+a+".json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.map((function(e){return e.database_loaded_time=z.Duration.fromMillis(l(e.database_loaded_time)),e.inferenece_time=z.Duration.fromMillis(l(e.inferenece_time)),e.item_collection_time=z.Duration.fromMillis(l(e.item_collection_time)),e.total_time=z.Duration.fromMillis(l(e.total_time)),e})));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),c=0,s=Object.entries(t.commits);case 10:if(!(c<s.length)){e.next=22;break}return i=s[c],m=Object(p.a)(i,2),h=m[0],f=m[1],e.next=17,r(h);case 17:b=e.sent,n.push({timestamp:f,commit_sha:h,stats:b,totalExpressions:A(b),totalUnknown:B(b),totalPartial:U(b),errorRate:W(b)});case 19:c++,e.next=10;break;case 22:return e.abrupt("return",n.sort((function(e,a){return e.timestamp-a.timestamp})));case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=Object(k.a)((function(e){return{root:{display:"flex"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{height:"240px"}}}));var J=t(169),K=t.n(J),L=t(170),q=Object(L.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:K.a.A400},background:{default:"#fff"}}});c.a.render(l.a.createElement(i.a,{theme:q},l.a.createElement(s.a,null),l.a.createElement((function(){var e=I(),a=Object(n.useState)([]),t=Object(p.a)(a,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:a=e.sent,c(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),l.a.createElement(h.a,{maxWidth:"lg"},l.a.createElement(b.a,{my:4},l.a.createElement(f.a,{variant:"h4",component:"h1",gutterBottom:!0},"RA Analyze Stats"),l.a.createElement(h.a,{maxWidth:"lg",className:e.container},l.a.createElement(_.a,{className:e.paper},l.a.createElement(v,{commits:r})),l.a.createElement(F,{commits:r}))))}),null)),document.querySelector("#root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.6d293a87.chunk.js.map