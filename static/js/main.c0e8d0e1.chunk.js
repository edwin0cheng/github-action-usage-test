(this["webpackJsonpra-stats-viewer"]=this["webpackJsonpra-stats-viewer"]||[]).push([[0],{209:function(e,t,a){e.exports=a(397)},397:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(25),c=a.n(l),s=a(437),i=a(436),o=a(18),m=a.n(o),u=a(31),h=a(12),p=a(429),f=a(399),b=a(438),d=a(441),g=a(13),E=a(33),y=a(400),v=Object(y.a)((function(e){return{container:{background:"#eee"}}}));function k(e){var t=v(),a=Object(g.a)(e.history.commits);a.reverse();return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.d,{className:t.container},r.a.createElement(E.c,{data:a,margin:{top:16,right:16,bottom:0,left:24}},r.a.createElement(E.e,{dataKey:"commit_sha",interval:0,tickFormatter:function(e){return e},angle:90,dy:33,dx:7,height:100}),r.a.createElement(E.f,{unit:"%"},r.a.createElement(E.a,{angle:270,position:"left",style:{textAnchor:"middle"}},"Unknown + Partial")),r.a.createElement(E.b,{type:"monotone",dataKey:"errorRate",stroke:"#556CD6",dot:!1}))))}var j=a(426),_=a(435),N=a(432),w=a(434),x=a(427),O=a(433),S=a(428),C=a(442),T=a(443),M=a(430),D=a(439),P=a(28),F=Object(j.a)({root:{width:"100%",overflowX:"auto"},paper:{paddingBottom:"100px"},table:{minWidth:650}});function I(e){var t=Object(j.a)({tablecell:{},detail:{paddingLeft:"1em",paddingRight:"1em"}})(),a=r.a.useState(null),n=Object(h.a)(a,2),l=n[0],c=n[1];if(r.a.useEffect((function(){function t(){return(t=Object(u.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.stat.fetch();case 2:a=t.sent,c(a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.stat]),null===l)return r.a.createElement("div",null,r.a.createElement("p",null," Loading ... ",e.stat.sha," "));var s=function(e){var t=e.substring(0,e.length-1);return t=t.substring(t.lastIndexOf("/")+1,e.length)},i=function(e,t){return 0===t?"0%":"".concat((e/t*100).toFixed(2),"%")},o=function(a){switch(a.kind){case"stats":var n=[],l=function(e){return i(e,a.expressions)};return"0"===e.tab?(n.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"c0"},a.declarations)),n.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"c1"},a.functions)),n.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"c2"},a.expressions)),n.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"c3"},a.unknown_types," (",l(a.unknown_types),")")),n.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"c4"},a.partial_unknown_types," (",l(a.partial_unknown_types),")")),n.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"c5"},a.type_mismatches))):(n.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"c6"},Math.floor(a.database_loaded_time.milliseconds))),n.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"c7"},Math.floor(a.item_collection_time.milliseconds))),n.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"c8"},Math.floor(a.inferenece_time.milliseconds))),n.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"c9"},Math.floor(a.total_time.milliseconds)))),r.a.createElement(S.a,{key:a.project_name},r.a.createElement(x.a,{className:t.tablecell,component:"th",scope:"row"},s(a.project_name)),r.a.createElement(x.a,{className:t.tablecell,align:"right"},a.roots),r.a.createElement(x.a,{className:t.tablecell,align:"right"},a.crates," [",a.modules,"]"),n);case"error":var c=8;return"1"===e.tab&&(c=6),r.a.createElement(S.a,{key:a.project_name},r.a.createElement(x.a,{className:t.tablecell,component:"th",scope:"row"},s(a.project_name)),r.a.createElement(x.a,{className:t.tablecell,align:"right",colSpan:c},a.msg))}},f=l.totalExpressions,d=l.totalPartial+l.totalUnknown,g=[];"0"===e.tab?(g.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"0"},"Decl")),g.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"1"},"Func")),g.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"2"},"Expr")),g.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"3"},"Unknown")),g.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"4"},"Partial")),g.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"5"},"Mismatches"))):(g.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"6"},"Database Loaded(ms)")),g.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"7"},"Items(ms)")),g.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"8"},"Inference(ms)")),g.push(r.a.createElement(x.a,{className:t.tablecell,align:"right",key:"9"},"Total(ms)")));var E=P.DateTime.fromSeconds(l.timestamp).toLocaleString(P.DateTime.DATETIME_SHORT_WITH_SECONDS),y=l.commit_sha;return r.a.createElement(p.a,{key:l.commit_sha},r.a.createElement(b.a,{display:"flex",p:1},r.a.createElement(b.a,{flexGrow:1},r.a.createElement("p",{id:y},r.a.createElement("a",{href:"https://github.com/rust-analyzer/rust-analyzer/commit/"+l.commit_sha},"@"+l.commit_sha)),r.a.createElement(b.a,{display:"flex"},r.a.createElement(b.a,{className:t.detail},r.a.createElement("small",null,"Commit Time: ",E)),r.a.createElement(b.a,{className:t.detail},r.a.createElement("small",null,"Total Expression: ",f)),r.a.createElement(b.a,{className:t.detail},r.a.createElement("small",null,"Total Unknown + Partial: ",d," (",i(d,f),")")))),r.a.createElement(b.a,null,r.a.createElement(C.a,{component:"fieldset"},r.a.createElement(T.a,{"aria-label":"position",name:"position",value:e.tab,onChange:function(t){e.setTab(t.target.value)},row:!0},r.a.createElement(M.a,{value:"0",control:r.a.createElement(D.a,{color:"primary"}),label:"Syntax",labelPlacement:"end"}),r.a.createElement(M.a,{value:"1",control:r.a.createElement(D.a,{color:"primary"}),label:"Time(ms)",labelPlacement:"end"}))))),r.a.createElement(N.a,{size:"small","aria-label":"Benchmarks table"},r.a.createElement(O.a,null,r.a.createElement(S.a,null,r.a.createElement(x.a,{className:t.tablecell},"Project Name"),r.a.createElement(x.a,{className:t.tablecell,align:"right"},"Roots"),r.a.createElement(x.a,{className:t.tablecell,align:"right"},"Crates [Modules]"),g)),r.a.createElement(w.a,null,function(){var e=[],t=!0,a=!1,n=void 0;try{for(var r,c=l.stats[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var s=r.value;e.push(o(s))}}catch(i){a=!0,n=i}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}return e}())))}function L(e){var t=F(),a=r.a.useState("0"),n=Object(h.a)(a,2),l=n[0],c=n[1],s=function(e){c(e)};return 0===e.stats.length?r.a.createElement("div",{className:t.root},r.a.createElement("p",null," Loading ...")):r.a.createElement("div",{className:t.root},e.stats.map((function(e){return r.a.createElement(_.a,{className:t.paper,key:e.sha},r.a.createElement(I,{stat:e,setTab:s,tab:l}))})))}var R=a(107),A=a(32);var U=function(e){return e.endsWith("ms")?parseFloat(e.substring(0,e.length-2)):1e3*parseFloat(e.substring(0,e.length-1))},W=function(){function e(){Object(R.a)(this,e),this.commits=[],this.nCommits=null,this.cb=null}return Object(A.a)(e,[{key:"subscribe",value:function(e){this.cb=e}},{key:"setCommitCount",value:function(e){this.nCommits=e,this.commits=[]}},{key:"add",value:function(e){this.commits.push(e),this.commits.sort((function(e,t){return t.timestamp-e.timestamp})),null!==this.nCommits&&null!==this.cb&&(this.commits.length<this.nCommits?this.cb([this.commits.length,this.nCommits]):this.cb(this))}}]),e}(),z=function(){function e(t,a,n){Object(R.a)(this,e),this.sha=t,this.timestamp=a,this.history=n}return Object(A.a)(e,[{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(Object(u.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/"+this.sha+".json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=a.map((function(e){return e.error?(e.kind="error",e.msg=e.error):(e.kind="stats",e.database_loaded_time=P.Duration.fromMillis(U(e.database_loaded_time)),e.inferenece_time=P.Duration.fromMillis(U(e.inferenece_time)),e.item_collection_time=P.Duration.fromMillis(U(e.item_collection_time)),e.total_time=P.Duration.fromMillis(U(e.total_time))),e})),r={timestamp:this.timestamp,commit_sha:this.sha,stats:n,totalExpressions:B(n),totalUnknown:H(n),totalPartial:J(n),errorRate:K(n)},this.history.add(r),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))))}]),e}();function B(e){var t=0,a=!0,n=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=l.value;"stats"===s.kind&&(t+=s.expressions)}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return t}function H(e){var t=0,a=!0,n=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=l.value;"stats"===s.kind&&(t+=s.unknown_types)}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return t}function J(e){var t=0,a=!0,n=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=l.value;"stats"===s.kind&&(t+=s.partial_unknown_types)}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return t}function K(e){var t=B(e),a=H(e)+J(e);return 0===a?0:a/t*100}var q=new W,G=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n,r,l,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"./data/commits.json",e.next=3,fetch("./data/commits.json");case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,r=Object.entries(n.commits),(l=r.map((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];return new z(a,parseInt(""+n),q)}))).sort((function(e,t){return t.timestamp-e.timestamp})),c=l.length,l=l.slice(t,t+50),q.setCommitCount(l.length),e.abrupt("return",[c,l]);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var X=Object(j.a)((function(e){return{root:{display:"flex"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{height:"320px"}}}));function Q(e){var t=X(),a=Object(n.useState)([0,0]),l=Object(h.a)(a,2),c=l[0],s=l[1];if(Object(n.useEffect)((function(){var e;e=function(e){return s(e)},q.subscribe(e)}),[e.commits]),c instanceof W)return r.a.createElement(_.a,{className:t.paper},r.a.createElement(k,{history:c}));var i=c,o=Object(h.a)(i,2),m=o[0],u=o[1];return r.a.createElement("div",null,r.a.createElement("p",null,"Loading graph ... ",m," / ",u))}var V=a(171),Y=a.n(V),Z=a(172),$=Object(Z.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Y.a.A400},background:{default:"#fff"}}});c.a.render(r.a.createElement(i.a,{theme:$},r.a.createElement(s.a,null),r.a.createElement((function(){var e=X(),t=Object(n.useState)(0),a=Object(h.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)([]),i=Object(h.a)(s,2),o=i[0],g=i[1],E=Object(n.useState)(1),y=Object(h.a)(E,2),v=y[0],k=y[1],j=Object(n.useState)(1),_=Object(h.a)(j,2),N=_[0],w=_[1];return Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(m.a.mark((function e(){var t,a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(l);case 2:t=e.sent,a=Object(h.a)(t,2),n=a[0],r=a[1],g(r),0===(c=Math.ceil(n/50))&&(c=1),k(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l]),r.a.createElement(p.a,{maxWidth:"lg"},r.a.createElement(b.a,{my:4},r.a.createElement(f.a,{variant:"h4",component:"h1",gutterBottom:!0},"RA Analyze Stats"),r.a.createElement(d.a,{count:v,page:N,shape:"rounded",onChange:function(e,t){var a=t;c(50*(a-=1)),w(t)}}),r.a.createElement(p.a,{maxWidth:"lg",className:e.container},r.a.createElement(Q,{commits:o}),r.a.createElement(L,{stats:o}))))}),null)),document.querySelector("#root"))}},[[209,1,2]]]);
//# sourceMappingURL=main.c0e8d0e1.chunk.js.map