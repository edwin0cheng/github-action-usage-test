(this["webpackJsonpra-stats-viewer"]=this["webpackJsonpra-stats-viewer"]||[]).push([[0],{205:function(e,a,t){e.exports=t(393)},393:function(e,a,t){"use strict";t.r(a);var n=t(1),l=t.n(n),r=t(22),c=t.n(r),s=t(431),i=t(430),o=t(25),m=t.n(o),u=t(52),p=t(42),h=t(424),f=t(395),d=t(432),g=t(171),b=t(30),E=t(396),y=Object(E.a)((function(e){return{container:{background:"#eee"}}}));function k(e){var a=y(),t=Object(g.a)(e.commits);return t.reverse(),l.a.createElement(l.a.Fragment,null,l.a.createElement(b.d,{className:a.container},l.a.createElement(b.c,{data:t,margin:{top:16,right:16,bottom:0,left:24}},l.a.createElement(b.e,{dataKey:"commit_sha"}),l.a.createElement(b.f,{unit:"%"},l.a.createElement(b.a,{angle:270,position:"left",style:{textAnchor:"middle"}},"Error Rate")),l.a.createElement(b.b,{type:"monotone",dataKey:"errorRate",stroke:"#556CD6",dot:!1}))))}var v=t(166),_=t(429),N=t(426),w=t(428),x=t(422),j=t(427),O=t(423),S=t(434),T=t(435),D=t(425),M=t(433),I=t(27),P=Object(v.a)({root:{width:"100%",overflowX:"auto"},paper:{paddingBottom:"100px"},table:{minWidth:650}});function R(e){var a=Object(v.a)({tablecell:{},detail:{paddingLeft:"1em",paddingRight:"1em"}})(),t=function(e){var a=e.substring(0,e.length-1);return a=a.substring(a.lastIndexOf("/")+1,e.length)},n=function(e,a){return 0===a?"0%":"".concat((e/a*100).toFixed(2),"%")},r=function(r){switch(r.kind){case"stats":var c=[],s=function(e){return n(e,r.expressions)};return"0"===e.tab?(c.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"c0"},r.declarations)),c.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"c1"},r.functions)),c.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"c2"},r.expressions)),c.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"c3"},r.unknown_types," (",s(r.unknown_types),")")),c.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"c4"},r.partial_unknown_types," (",s(r.partial_unknown_types),")")),c.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"c5"},r.type_mismatches))):(c.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"c6"},Math.floor(r.database_loaded_time.milliseconds))),c.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"c7"},Math.floor(r.item_collection_time.milliseconds))),c.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"c8"},Math.floor(r.inferenece_time.milliseconds))),c.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"c9"},Math.floor(r.total_time.milliseconds)))),l.a.createElement(O.a,{key:r.project_name},l.a.createElement(x.a,{className:a.tablecell,component:"th",scope:"row"},t(r.project_name)),l.a.createElement(x.a,{className:a.tablecell,align:"right"},r.roots),l.a.createElement(x.a,{className:a.tablecell,align:"right"},r.crates," [",r.modules,"]"),c);case"error":var i=8;return"1"===e.tab&&(i=6),l.a.createElement(O.a,{key:r.project_name},l.a.createElement(x.a,{className:a.tablecell,component:"th",scope:"row"},t(r.project_name)),l.a.createElement(x.a,{className:a.tablecell,align:"right",colSpan:i},r.msg))}},c=e.commit.totalExpressions,s=e.commit.totalPartial+e.commit.totalUnknown,i=[];"0"===e.tab?(i.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"0"},"Decl")),i.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"1"},"Func")),i.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"2"},"Expr")),i.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"3"},"Unknown")),i.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"4"},"Partial")),i.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"5"},"Mismatches"))):(i.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"6"},"Database Loaded(ms)")),i.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"7"},"Items(ms)")),i.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"8"},"Inference(ms)")),i.push(l.a.createElement(x.a,{className:a.tablecell,align:"right",key:"9"},"Total(ms)")));var o=I.DateTime.fromSeconds(e.commit.timestamp).toLocaleString(I.DateTime.DATETIME_SHORT_WITH_SECONDS),m=e.commit.commit_sha;return l.a.createElement(h.a,{key:e.commit.commit_sha},l.a.createElement(d.a,{display:"flex",p:1},l.a.createElement(d.a,{flexGrow:1},l.a.createElement("p",{id:m},l.a.createElement("a",{href:"https://github.com/rust-analyzer/rust-analyzer/commit/"+e.commit.commit_sha},"@"+e.commit.commit_sha)),l.a.createElement(d.a,{display:"flex"},l.a.createElement(d.a,{className:a.detail},l.a.createElement("small",null,"Commit Time: ",o)),l.a.createElement(d.a,{className:a.detail},l.a.createElement("small",null,"Total Expression: ",c)),l.a.createElement(d.a,{className:a.detail},l.a.createElement("small",null,"Total Unknown + Partial: ",s," (",n(s,c),")")))),l.a.createElement(d.a,null,l.a.createElement(S.a,{component:"fieldset"},l.a.createElement(T.a,{"aria-label":"position",name:"position",value:e.tab,onChange:function(a){e.setTab(a.target.value)},row:!0},l.a.createElement(D.a,{value:"0",control:l.a.createElement(M.a,{color:"primary"}),label:"Syntax",labelPlacement:"end"}),l.a.createElement(D.a,{value:"1",control:l.a.createElement(M.a,{color:"primary"}),label:"Time(ms)",labelPlacement:"end"}))))),l.a.createElement(N.a,{size:"small","aria-label":"Benchmarks table"},l.a.createElement(j.a,null,l.a.createElement(O.a,null,l.a.createElement(x.a,{className:a.tablecell},"Project Name"),l.a.createElement(x.a,{className:a.tablecell,align:"right"},"Roots"),l.a.createElement(x.a,{className:a.tablecell,align:"right"},"Crates [Modules]"),i)),l.a.createElement(w.a,null,function(){var a=[],t=!0,n=!1,l=void 0;try{for(var c,s=e.commit.stats[Symbol.iterator]();!(t=(c=s.next()).done);t=!0){var i=c.value;a.push(r(i))}}catch(o){n=!0,l=o}finally{try{t||null==s.return||s.return()}finally{if(n)throw l}}return a}())))}function A(e){var a=P(),t=l.a.useState("0"),n=Object(p.a)(t,2),r=n[0],c=n[1],s=function(e){c(e)};return l.a.createElement("div",{className:a.root},e.commits.map((function(e){return l.a.createElement(_.a,{className:a.paper,key:e.commit_sha},l.a.createElement(R,{commit:e,setTab:s,tab:r}))})))}function B(e){var a=0,t=!0,n=!1,l=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var s=r.value;"stats"===s.kind&&(a+=s.expressions)}}catch(i){n=!0,l=i}finally{try{t||null==c.return||c.return()}finally{if(n)throw l}}return a}function C(e){var a=0,t=!0,n=!1,l=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var s=r.value;"stats"===s.kind&&(a+=s.unknown_types)}}catch(i){n=!0,l=i}finally{try{t||null==c.return||c.return()}finally{if(n)throw l}}return a}function F(e){var a=0,t=!0,n=!1,l=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var s=r.value;"stats"===s.kind&&(a+=s.partial_unknown_types)}}catch(i){n=!0,l=i}finally{try{t||null==c.return||c.return()}finally{if(n)throw l}}return a}function W(e){var a=B(e),t=C(e)+F(e);return 0===t?0:t/a*100}var z=function(){var e=Object(u.a)(m.a.mark((function e(){var a,t,n,l,r,c,s,i,o,h,f,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/commits.json");case 2:return a=e.sent,e.next=5,a.json();case 5:t=e.sent,n=[],l=function(e){return e.endsWith("ms")?parseFloat(e.substring(0,e.length-2)):1e3*parseFloat(e.substring(0,e.length-1))},r=function(){var e=Object(u.a)(m.a.mark((function e(a){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/"+a+".json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.map((function(e){return e.error?(e.kind="error",e.msg=e.error):(e.kind="stats",e.database_loaded_time=I.Duration.fromMillis(l(e.database_loaded_time)),e.inferenece_time=I.Duration.fromMillis(l(e.inferenece_time)),e.item_collection_time=I.Duration.fromMillis(l(e.item_collection_time)),e.total_time=I.Duration.fromMillis(l(e.total_time))),e})));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),c=0,s=Object.entries(t.commits);case 10:if(!(c<s.length)){e.next=22;break}return i=s[c],o=Object(p.a)(i,2),h=o[0],f=o[1],e.next=17,r(h);case 17:d=e.sent,n.push({timestamp:parseInt(""+f),commit_sha:h,stats:d,totalExpressions:B(d),totalUnknown:C(d),totalPartial:F(d),errorRate:W(d)});case 19:c++,e.next=10;break;case 22:return setTimeout((function(){console.log(window.location.hash),document.getElementById(window.location.hash.substr(1)).scrollIntoView()}),.5),e.abrupt("return",n.sort((function(e,a){return a.timestamp-e.timestamp})));case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=Object(v.a)((function(e){return{root:{display:"flex"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{height:"240px"}}}));var L=t(169),H=t.n(L),J=t(170),K=Object(J.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:H.a.A400},background:{default:"#fff"}}});c.a.render(l.a.createElement(i.a,{theme:K},l.a.createElement(s.a,null),l.a.createElement((function(){var e=U(),a=Object(n.useState)([]),t=Object(p.a)(a,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:a=e.sent,c(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),l.a.createElement(h.a,{maxWidth:"lg"},l.a.createElement(d.a,{my:4},l.a.createElement(f.a,{variant:"h4",component:"h1",gutterBottom:!0},"RA Analyze Stats"),l.a.createElement(h.a,{maxWidth:"lg",className:e.container},l.a.createElement(_.a,{className:e.paper},l.a.createElement(k,{commits:r})),l.a.createElement(A,{commits:r}))))}),null)),document.querySelector("#root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.f0e55ee7.chunk.js.map