{"version":3,"sources":["Chart.tsx","MainUnit.tsx","commitStats.ts","App.tsx","theme.tsx","index.tsx"],"names":["useStyles","makeStyles","theme","container","background","Chart","props","classes","commits","reverse","Fragment","className","data","margin","top","right","bottom","left","dataKey","unit","angle","position","style","textAnchor","type","stroke","dot","root","width","overflowX","paper","paddingBottom","table","minWidth","Benchmarks","tablecell","detail","paddingLeft","paddingRight","shortName","str","base","substring","length","lastIndexOf","percent","n","toFixed","row","stat","kind","content_rows","percent_expr","expressions","tab","push","TableCell","align","key","declarations","functions","unknown_types","partial_unknown_types","type_mismatches","Math","floor","database_loaded_time","milliseconds","item_collection_time","inferenece_time","total_time","TableRow","project_name","component","scope","roots","crates","modules","nCol","colSpan","msg","total_expresions","commit","totalExpressions","total_unknown","totalPartial","totalUnknown","headers","formattedTime","DateTime","fromSeconds","timestamp","toLocaleString","DATETIME_SHORT_WITH_SECONDS","refID","commit_sha","Container","Box","display","p","flexGrow","id","href","FormControl","RadioGroup","aria-label","name","value","onChange","event","setTab","target","FormControlLabel","control","Radio","color","label","labelPlacement","Table","size","TableHead","TableBody","rows","stats","MainUnit","React","useState","setValue","handleTabChange","newValue","map","Paper","total_partial","errorRate","exprs","totalError","fetchCommits","a","fetch","res","json","parseTime","s","endsWith","parseFloat","fetchStats","sha","error","Duration","fromMillis","Object","entries","parseInt","setTimeout","console","log","window","location","hash","document","getElementById","substr","scrollIntoView","sort","b","paddingTop","spacing","height","createMuiTheme","palette","primary","main","secondary","red","A400","default","ReactDOM","render","ThemeProvider","CssBaseline","setCommits","useEffect","fetchData","maxWidth","my","Typography","variant","gutterBottom","querySelector"],"mappings":"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","file":"static/js/main.f0e55ee7.chunk.js","sourcesContent":["import React from 'react';\r\nimport { LineChart, Line, XAxis, YAxis, Label, ResponsiveContainer, BarChart, Bar } from 'recharts';\r\nimport { CommitStat } from './commitStats';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    container: {\r\n      background: \"#eee\",\r\n    },\r\n  }))\r\n\r\ninterface ChartProps {\r\n    commits: CommitStat[]\r\n}\r\n\r\nexport default function Chart(props: ChartProps) {\r\n    const classes = useStyles();\r\n    const commits = [...props.commits];\r\n    commits.reverse();\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ResponsiveContainer className={classes.container}>\r\n                <LineChart\r\n                    data={commits}\r\n                    margin={{\r\n                        top: 16,\r\n                        right: 16,\r\n                        bottom: 0,\r\n                        left: 24,\r\n                    }}\r\n                >\r\n                    <XAxis dataKey=\"commit_sha\"/>\r\n                    <YAxis  unit=\"%\">\r\n                        <Label angle={270} position=\"left\" style={{ textAnchor: 'middle' }}>\r\n                            Error Rate\r\n                        </Label>\r\n                    </YAxis>\r\n                    {/* <Bar dataKey=\"totalUnknown\" fill=\"#8884d8\" /> */}\r\n                    <Line type=\"monotone\" dataKey=\"errorRate\" stroke=\"#556CD6\" dot={false} />\r\n                </LineChart>\r\n            </ResponsiveContainer>\r\n        </React.Fragment>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { Container, Box, FormControl, RadioGroup, FormControlLabel, Radio } from '@material-ui/core';\r\nimport {CommitStat, StatsOrError} from './commitStats';\r\nimport {DateTime} from 'luxon';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        width: '100%',\r\n        overflowX: 'auto',\r\n    },\r\n    paper: {\r\n        paddingBottom: '100px',\r\n    },\r\n    table: {\r\n        minWidth: 650,\r\n    },\r\n});\r\n\r\ninterface BenchmarksProps {\r\n    commit: CommitStat,\r\n    setTab: (tab: string) => void,\r\n    tab: string,\r\n}\r\n\r\nfunction Benchmarks(props: BenchmarksProps) {\r\n    const classes = makeStyles({\r\n        tablecell: {\r\n            // fontSize: '0.8em'\r\n        },\r\n        detail: {\r\n            paddingLeft: '1em',\r\n            paddingRight: '1em'\r\n        }\r\n    })()\r\n\r\n    const shortName = function (str: string): string {\r\n        var base = str.substring(0, str.length - 1)\r\n        base = base.substring(base.lastIndexOf('/') + 1, str.length);\r\n\r\n        return base;\r\n    }\r\n\r\n    const percent = function(n: number, base: number): string {\r\n        if (base === 0) return \"0%\";\r\n\r\n            const p = (n / base) * 100.0\r\n            return `${p.toFixed(2)}%`\r\n    }\r\n\r\n    const row = function (stat: StatsOrError) {       \r\n        switch(stat.kind) {\r\n            case \"stats\": {\r\n                let content_rows = [];\r\n                const percent_expr = function (n: number): string {\r\n                    return percent(n, stat.expressions)\r\n                }    \r\n                \r\n                if (props.tab === \"0\") {\r\n                    content_rows.push(<TableCell className={classes.tablecell} align=\"right\" key=\"c0\">{stat.declarations}</TableCell>);\r\n                    content_rows.push(<TableCell className={classes.tablecell} align=\"right\" key=\"c1\">{stat.functions}</TableCell>);\r\n                    content_rows.push(<TableCell className={classes.tablecell} align=\"right\" key=\"c2\">{stat.expressions}</TableCell>);\r\n                    content_rows.push(<TableCell className={classes.tablecell} align=\"right\" key=\"c3\">{stat.unknown_types} ({percent_expr(stat.unknown_types)})</TableCell>);\r\n                    content_rows.push(<TableCell className={classes.tablecell} align=\"right\" key=\"c4\">{stat.partial_unknown_types} ({percent_expr(stat.partial_unknown_types)})</TableCell>);\r\n                    content_rows.push(<TableCell className={classes.tablecell} align=\"right\" key=\"c5\">{stat.type_mismatches}</TableCell>);\r\n                } else { \r\n                    content_rows.push(<TableCell className={classes.tablecell} align=\"right\" key=\"c6\">{Math.floor(stat.database_loaded_time.milliseconds)}</TableCell>);\r\n                    content_rows.push(<TableCell className={classes.tablecell} align=\"right\" key=\"c7\">{Math.floor(stat.item_collection_time.milliseconds)}</TableCell>);\r\n                    content_rows.push(<TableCell className={classes.tablecell} align=\"right\" key=\"c8\">{Math.floor(stat.inferenece_time.milliseconds)}</TableCell>);\r\n                    content_rows.push(<TableCell className={classes.tablecell} align=\"right\" key=\"c9\">{Math.floor(stat.total_time.milliseconds)}</TableCell>);\r\n                }\r\n\r\n                return (<TableRow key={stat.project_name}>\r\n                    <TableCell className={classes.tablecell} component=\"th\" scope=\"row\">{shortName(stat.project_name)}</TableCell>\r\n                    <TableCell className={classes.tablecell} align=\"right\">{stat.roots}</TableCell>\r\n                    <TableCell className={classes.tablecell} align=\"right\">{stat.crates} [{stat.modules}]</TableCell>\r\n                    {content_rows}\r\n                </TableRow>)        \r\n            }\r\n            case \"error\": {\r\n                let nCol = 8;\r\n                if (props.tab === \"1\") {\r\n                    nCol = 6\r\n                }\r\n\r\n                return (<TableRow key={stat.project_name}>\r\n                    <TableCell className={classes.tablecell} component=\"th\" scope=\"row\">{shortName(stat.project_name)}</TableCell>\r\n                    <TableCell className={classes.tablecell} align=\"right\" colSpan={nCol}>{stat.msg}</TableCell>\r\n                </TableRow>)\r\n            }\r\n        }\r\n    }\r\n\r\n    const rows = function () {\r\n        let rows = [];\r\n        for (let stat of props.commit.stats) {\r\n            rows.push(row(stat))\r\n        }\r\n        return rows;\r\n    }\r\n\r\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        props.setTab(event.target.value);\r\n    };\r\n\r\n    let total_expresions = props.commit.totalExpressions\r\n    let total_unknown = props.commit.totalPartial + props.commit.totalUnknown;\r\n\r\n    let headers = []\r\n    if (props.tab === \"0\") {\r\n        headers.push(<TableCell className={classes.tablecell} align=\"right\" key=\"0\">Decl</TableCell>);\r\n        headers.push(<TableCell className={classes.tablecell} align=\"right\" key=\"1\">Func</TableCell>);\r\n        headers.push(<TableCell className={classes.tablecell} align=\"right\" key=\"2\">Expr</TableCell>);\r\n        headers.push(<TableCell className={classes.tablecell} align=\"right\" key=\"3\">Unknown</TableCell>);\r\n        headers.push(<TableCell className={classes.tablecell} align=\"right\" key=\"4\">Partial</TableCell>);\r\n        headers.push(<TableCell className={classes.tablecell} align=\"right\" key=\"5\">Mismatches</TableCell>);\r\n    } else {\r\n        headers.push(<TableCell className={classes.tablecell} align=\"right\" key=\"6\">Database Loaded(ms)</TableCell>);\r\n        headers.push(<TableCell className={classes.tablecell} align=\"right\" key=\"7\">Items(ms)</TableCell>);\r\n        headers.push(<TableCell className={classes.tablecell} align=\"right\" key=\"8\">Inference(ms)</TableCell>);\r\n        headers.push(<TableCell className={classes.tablecell} align=\"right\" key=\"9\">Total(ms)</TableCell>);\r\n    }\r\n        \r\n    const time = DateTime.fromSeconds(props.commit.timestamp);\r\n    const formattedTime = time.toLocaleString(DateTime.DATETIME_SHORT_WITH_SECONDS);\r\n    const refID = props.commit.commit_sha;\r\n\r\n    return (\r\n        <Container key={props.commit.commit_sha}>\r\n            <Box display=\"flex\" p={1}>\r\n                <Box flexGrow={1}>\r\n                    <p id={refID}><a href={\"https://github.com/rust-analyzer/rust-analyzer/commit/\" + props.commit.commit_sha}>{\"@\" + props.commit.commit_sha}</a></p>\r\n                    <Box display=\"flex\">\r\n                        <Box className={classes.detail}><small>Commit Time: {formattedTime}</small></Box>\r\n                        <Box className={classes.detail}><small>Total Expression: {total_expresions}</small></Box> \r\n                        <Box className={classes.detail}><small>Total Unknown + Partial: {total_unknown} ({percent(total_unknown, total_expresions)})</small></Box> \r\n                    </Box>\r\n                </Box>\r\n                <Box>\r\n                    <FormControl component=\"fieldset\">\r\n                        <RadioGroup aria-label=\"position\" name=\"position\" value={props.tab} onChange={handleChange} row>\r\n                            <FormControlLabel\r\n                                value=\"0\"\r\n                                control={<Radio color=\"primary\" />}\r\n                                label=\"Syntax\"\r\n                                labelPlacement=\"end\"\r\n                            />\r\n                            <FormControlLabel\r\n                                value=\"1\"\r\n                                control={<Radio color=\"primary\" />}\r\n                                label=\"Time(ms)\"\r\n                                labelPlacement=\"end\"\r\n                            />\r\n                        </RadioGroup>\r\n                    </FormControl>\r\n                </Box>\r\n            </Box>\r\n\r\n            <Table size=\"small\" aria-label=\"Benchmarks table\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell className={classes.tablecell}>Project Name</TableCell>\r\n                        <TableCell className={classes.tablecell} align=\"right\">Roots</TableCell>\r\n                        <TableCell className={classes.tablecell} align=\"right\">Crates [Modules]</TableCell>\r\n                        {headers}\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {rows()}\r\n                </TableBody>\r\n            </Table>\r\n        </Container>\r\n\r\n    )\r\n}\r\n\r\ninterface MainUnitProps {\r\n    commits: Array<CommitStat>\r\n}\r\n\r\nexport default function MainUnit(props: MainUnitProps) {\r\n    const classes = useStyles();\r\n    const [value, setValue] = React.useState(\"0\");\r\n\r\n    const handleTabChange = (newValue: string): void => {\r\n        setValue(newValue);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {props.commits.map((commit) =>\r\n                <Paper className={classes.paper} key={commit.commit_sha}>\r\n                    <Benchmarks commit={commit} setTab={handleTabChange} tab={value} />\r\n                </Paper>\r\n            )}\r\n        </div>\r\n    );\r\n}","import { Duration } from 'luxon';\r\n\r\nexport interface CommitStat {\r\n    timestamp: number,\r\n    commit_sha: string,\r\n    stats: StatsOrError[],\r\n\r\n    totalExpressions: number,\r\n    totalUnknown: number,\r\n    totalPartial: number,\r\n    errorRate: number,\r\n}\r\n\r\nexport interface Error {\r\n    kind: \"error\",\r\n    project_name: string,\r\n    msg: string,\r\n}\r\n\r\nexport interface Stats {\r\n    kind: \"stats\",\r\n    database_loaded_time: Duration,\r\n    declarations: number,\r\n    expressions: number,\r\n    functions: number,\r\n    inferenece_time: Duration,\r\n    item_collection_time: Duration,\r\n    crates: number,\r\n    modules: number,\r\n    partial_unknown_types: number,\r\n    project_name: string,\r\n    roots: number,\r\n    total_time: Duration,\r\n    type_mismatches: number,\r\n    unknown_types: number,\r\n}\r\n\r\nexport type StatsOrError = Stats | Error;\r\n\r\nfunction totalExpressions(stats: StatsOrError[]): number {\r\n    let total_expresions = 0;\r\n    for (let stat of stats) {\r\n        if (stat.kind === \"stats\") {\r\n            total_expresions += stat.expressions;\r\n        }\r\n    }\r\n    return total_expresions;\r\n}\r\n\r\nfunction totalUnknown(stats: StatsOrError[]): number {\r\n    let total_unknown = 0;\r\n    for (let stat of stats) {\r\n        if (stat.kind === \"stats\") {\r\n            total_unknown += stat.unknown_types;\r\n        }\r\n    }\r\n    return total_unknown;\r\n}\r\n\r\nfunction totalPartial(stats: StatsOrError[]): number {\r\n    let total_partial = 0;\r\n    for (let stat of stats) {\r\n        if (stat.kind === \"stats\") {\r\n            total_partial += stat.partial_unknown_types;\r\n        }\r\n    }\r\n    return total_partial;\r\n}\r\n\r\nfunction errorRate(stats: StatsOrError[]): number {\r\n    let exprs = totalExpressions(stats)\r\n    let totalError = totalUnknown(stats) + totalPartial(stats)\r\n    if (totalError === 0) return 0;\r\n\r\n    return (totalError / exprs) * 100.0\r\n}\r\n\r\nexport const fetchCommits = async function (): Promise<CommitStat[]> {\r\n    const res = await fetch('./data/commits.json')\r\n    const json = await res.json()\r\n    let commits: CommitStat[] = [];\r\n\r\n    const parseTime = function (s: string): number {\r\n        if (s.endsWith(\"ms\")) {\r\n            return parseFloat(s.substring(0, s.length - 2))\r\n        }\r\n\r\n        return parseFloat(s.substring(0, s.length - 1)) * 1000\r\n    }\r\n\r\n    const fetchStats = async function (sha: string): Promise<StatsOrError[]> {\r\n        const res = await fetch('./data/' + sha + '.json')\r\n        const json = await res.json()\r\n        return json.map((s: any) => {\r\n            if (s.error) {                \r\n                s.kind = \"error\";\r\n                s.msg = s.error;\r\n            } else {\r\n                s.kind = \"stats\";\r\n                s.database_loaded_time = Duration.fromMillis(parseTime(s.database_loaded_time))\r\n                s.inferenece_time = Duration.fromMillis(parseTime(s.inferenece_time))\r\n                s.item_collection_time = Duration.fromMillis(parseTime(s.item_collection_time))\r\n                s.total_time = Duration.fromMillis(parseTime(s.total_time))\r\n            }\r\n\r\n            return s            \r\n        })\r\n    }\r\n\r\n    for (let [key, value] of Object.entries(json.commits)) {\r\n        let stats = await fetchStats(key);\r\n\r\n        commits.push({\r\n            timestamp: parseInt(\"\" + value) as number,\r\n            commit_sha: key,\r\n            stats,\r\n            totalExpressions: totalExpressions(stats),\r\n            totalUnknown: totalUnknown(stats),\r\n            totalPartial: totalPartial(stats),\r\n            errorRate: errorRate(stats),\r\n        })\r\n    }\r\n\r\n    // Scroll to hash after 0.5 sec\r\n    setTimeout(() => {\r\n        console.log(window.location.hash)\r\n        document!.getElementById(window.location.hash.substr(1))!.scrollIntoView();        \r\n    }, 0.5)\r\n\r\n    // Sort by timestamp    \r\n    return commits.sort((a, b) => {\r\n        return b.timestamp - a.timestamp\r\n    })\r\n}","import React, { useState, useEffect, useRef } from 'react';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Chart from './Chart';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper } from '@material-ui/core';\nimport MainUnit from './MainUnit';\nimport {CommitStat, fetchCommits} from './commitStats';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n  },\n  container: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n  },\n  paper: {\n    height: '240px',\n  }\n}))\n\nexport default function App() {\n  const classes = useStyles();\n  const [commits, setCommits] = useState([] as Array<CommitStat>);\n\n  useEffect(() => {\n    async function fetchData() {\n        const commits = await fetchCommits();\n        setCommits(commits)\n    }\n    fetchData()\n  }, [])\n\n\n  return (\n    <Container maxWidth=\"lg\">\n      <Box my={4} >\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          RA Analyze Stats\n        </Typography>\n\n        <Container maxWidth=\"lg\" className={classes.container}>\n          <Paper className={classes.paper}>\n            <Chart commits={commits}/>\n          </Paper>\n          <MainUnit commits={commits}/>\n        </Container>\n      </Box>\n    </Container>\n  );\n}\n","import red from '@material-ui/core/colors/red';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n});\n\nexport default theme;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport App from './App';\nimport theme from './theme';\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n    <CssBaseline />\n    <App />\n  </ThemeProvider>,\n  document.querySelector('#root'),\n);\n"],"sourceRoot":""}